{% extends 'base.html' %}

{% block head %}
    <title>Жалобы</title>
{% endblock %}

{% block main %}
    {% if not user.is_authenticated %}
        <h1>Только авторизованные пользователи могут оставлять жалобы</h1>
    {% else %}
        <h1>Страница жалоб</h1>
        <div class="horizontal-centering">
            <div class="medium-block medium">
                {% if form.errors %}
                    <div class="block">
                        <h2>Ошибки</h2>
                        {{ form.errors }}
                    </div>
                {% endif %}
                <h2>Отправить жалобу</h2>
                <form method="post" action="{% url 'moder_report_send' %}">
                    {% csrf_token %}
                    {{ form.Author }}
                    <div class="horizontal-centering">
                        <label>{{ form.Theme.label }}</label>
                        {{ form.Theme }}
                        {{ form.Content }}
                        <input type="submit" value="Изменить" class="medium-btn green input wide">
                    </div>
                </form>
            </div>
            <div class="medium-block medium">
                <h2>Отправленные жалобы</h2>
                {% for report in reports %}
                    <div class="list-elem">
                        <div>Жалоба №{{ report.id }} - {{ report.status }}</div>
                    </div>
                {% endfor %}
            </div>
        </div>
        {% if rights != 0 %}
            <a href="{% url 'moder_manage' %}" class="big-btn blue">Панель модератора</a>
        {% endif %}
        <script>
            document.querySelector('#author').value = {{ user.id }}
        </script>
    {% endif %}
{% endblock %}
